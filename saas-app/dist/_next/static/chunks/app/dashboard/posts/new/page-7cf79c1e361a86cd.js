(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[264],{63652:function(e,t,a){Promise.resolve().then(a.bind(a,89119))},89119:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var r=a(57437),s=a(2265),n=a(99376),o=a(62869),i=a(66070),d=a(94508);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});l.displayName="Textarea";var c=a(26815),u=a(95054),f=a(30401);let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(u.fC,{ref:t,className:(0,d.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...s,children:(0,r.jsx)(u.z$,{className:(0,d.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(f.Z,{className:"h-4 w-4"})})})});m.displayName=u.fC.displayName;var h=a(17811),x=a(92451),p=a(10407);function g(e){let{className:t,classNames:a,showOutsideDays:s=!0,...n}=e;return(0,r.jsx)(h._W,{showOutsideDays:s,className:(0,d.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,d.cn)((0,o.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,d.cn)((0,o.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,r.jsx)(x.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,r.jsx)(p.Z,{className:"h-4 w-4"})}},...n})}g.displayName="Calendar";var b=a(43909);let y=b.fC,v=b.xz,j=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:n=4,...o}=e;return(0,r.jsx)(b.h_,{children:(0,r.jsx)(b.VY,{ref:t,align:s,sideOffset:n,className:(0,d.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});j.displayName=b.VY.displayName;var N=a(27107),w=a(31047),k=a(91723);function _(){let e=(0,n.useRouter)(),[t,a]=(0,s.useState)(""),[u,f]=(0,s.useState)([]),[h,x]=(0,s.useState)([]),[p,b]=(0,s.useState)(),[_,C]=(0,s.useState)("12:00"),[S,z]=(0,s.useState)(!1),[R,P]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!localStorage.getItem("token")){e.push("/login");return}I()},[e]);let I=async()=>{let e=localStorage.getItem("token");try{let t=await fetch("".concat("http://localhost:8787","/social/accounts"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();x(e.accounts)}}catch(e){console.error("Error:",e)}},O=e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},T=async function(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===u.length){alert("Please select at least one platform");return}P(!0);let r=localStorage.getItem("token"),s=null;if(S&&p){let[e,t]=_.split(":"),a=new Date(p);a.setHours(parseInt(e),parseInt(t)),s=a.toISOString()}try{let n=await fetch("".concat("http://localhost:8787","/posts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({content:t,platforms:u,status:a?"scheduled":"draft",scheduledAt:s,mediaUrls:[]})});if(n.ok){if(a){let e=await n.json();await fetch("".concat("http://localhost:8787","/posts/").concat(e.id,"/publish"),{method:"POST",headers:{Authorization:"Bearer ".concat(r)}})}e.push("/dashboard/posts")}}catch(e){console.error("Error:",e)}finally{P(!1)}},Z=[{id:"twitter",name:"Twitter/X",maxLength:280},{id:"instagram",name:"Instagram",maxLength:2200},{id:"linkedin",name:"LinkedIn",maxLength:3e3},{id:"tiktok",name:"TikTok",maxLength:2200}],L=Math.min(...u.map(e=>{var t;return(null===(t=Z.find(t=>t.id===e))||void 0===t?void 0:t.maxLength)||5e3}),5e3),D=t.length>L;return(0,r.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Create New Post"}),(0,r.jsxs)(i.Zb,{children:[(0,r.jsx)(i.Ol,{children:(0,r.jsx)(i.ll,{children:"Post Content"})}),(0,r.jsxs)(i.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{children:"Content"}),(0,r.jsx)(l,{value:t,onChange:e=>a(e.target.value),placeholder:"What do you want to share?",rows:6,className:(0,d.cn)(D&&"border-red-500")}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsxs)("span",{className:(0,d.cn)(D&&"text-red-500"),children:[t.length," / ",L," characters"]}),D&&(0,r.jsx)("span",{className:"text-red-500",children:"Character limit exceeded"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c._,{children:"Select Platforms"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:Z.map(e=>{let t=h.some(t=>t.platform===e.id);return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(m,{id:e.id,checked:u.includes(e.id),onCheckedChange:()=>O(e.id),disabled:!t}),(0,r.jsxs)(c._,{htmlFor:e.id,className:(0,d.cn)("cursor-pointer",!t&&"text-muted-foreground"),children:[e.name,!t&&" (not connected)"]})]},e.id)})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(m,{id:"schedule",checked:S,onCheckedChange:e=>z(e)}),(0,r.jsx)(c._,{htmlFor:"schedule",children:"Schedule for later"})]}),S&&(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(y,{children:[(0,r.jsx)(v,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"outline",className:(0,d.cn)("justify-start text-left font-normal",!p&&"text-muted-foreground"),children:[(0,r.jsx)(w.Z,{className:"mr-2 h-4 w-4"}),p?(0,N.WU)(p,"PPP"):(0,r.jsx)("span",{children:"Pick a date"})]})}),(0,r.jsx)(j,{className:"w-auto p-0",children:(0,r.jsx)(g,{mode:"single",selected:p,onSelect:b,disabled:e=>e<new Date||e<new Date("1900-01-01"),initialFocus:!0})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(k.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"time",value:_,onChange:e=>C(e.target.value),className:"border rounded px-2 py-1"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,r.jsx)(o.z,{variant:"outline",onClick:()=>T(!1),disabled:R||0===t.length,children:"Save as Draft"}),(0,r.jsx)(o.z,{onClick:()=>T(!0),disabled:R||0===t.length||0===u.length||D||S&&!p,children:S?"Schedule":"Publish Now"})]})]})]})]})}},62869:function(e,t,a){"use strict";a.d(t,{d:function(){return d},z:function(){return l}});var r=a(57437),s=a(2265),n=a(37053),o=a(90535),i=a(94508);let d=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:a,variant:s,size:o,asChild:l=!1,...c}=e,u=l?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:s,size:o,className:a})),ref:t,...c})});l.displayName="Button"},66070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return l},Zb:function(){return o},aY:function(){return c},eW:function(){return u},ll:function(){return d}});var r=a(57437),s=a(2265),n=a(94508);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});o.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});d.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});l.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},26815:function(e,t,a){"use strict";a.d(t,{_:function(){return l}});var r=a(57437),s=a(2265),n=a(6394),o=a(90535),i=a(94508);let d=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,i.cn)(d(),a),...s})});l.displayName=n.f.displayName},94508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var r=a(61994),s=a(53335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}}},function(e){e.O(0,[924,149,971,117,744],function(){return e(e.s=63652)}),_N_E=e.O()}]);